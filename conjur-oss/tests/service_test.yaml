suite: Test Service
templates:
  - "service.yaml"
tests:
  - it: should match snapshot of default values
    set:
      dataKey: "1234567890"
      createDataKeySecret: true
      database:
        secrets:
          createDatabasePasswordSecrets: true
    asserts:
      - matchSnapshot: {}

  - it: should include annotations if specified
    set:
      dataKey: "1234567890"
      createDataKeySecret: true
      database:
        secrets:
          createDatabasePasswordSecrets: true
      service:
        internal:
          annotations:
            dummy.io/foo: bar
    asserts:
      - equal:
          path: metadata.annotations["dummy.io/foo"]
          value: "bar"
